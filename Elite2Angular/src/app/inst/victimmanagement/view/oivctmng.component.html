<s4-message [(msgs)]="msgs" id="validmsg"> </s4-message>
<s4-pane [cardType]="true" [title]="translateService.translate('oivctmng.victimmanagement')" screenId="OIVCTMNG">
    <s4-panel [cardType]="true">
        <div fxLayout="row wrap" fxLayoutAlign="start end" fxLayoutGap="10px">
            <div fxFlex="1 0 100px">
                <s4-grid #grid id="victimRecord" [rowData]="victimRecordData" [columnDefs]="victimRecordColumnDef"
                    (rowClicked)="gridOnRowClickOne($event)" [selected]="victRcrdIndex" [validateRow]="validateRowData"
                    [enableInsert]="enableInsert" enableUpdate=true (onCommit)="saveVctRcrdData($event)"
                    [onInsert]="onGridInsertOne">
                </s4-grid>
            </div>
        </div>
        <div fxLayout="row wrap" fxLayoutAlign="start end" fxLayoutGap="10px">
			<div fxFlex>
				<s4-textarea id="textcasenotetext" [(ngModel)]="victRcrdModel.noteTextTemp"
					[placeholder]="translateService.translate('oivctmng.note')" 
					maxlength="4000" (ngModelChange)="isInsertable($event)" >
				</s4-textarea>
			</div>
		</div>
        <div fxLayout="row wrap" fxLayoutAlign="left end" fxLayoutGap="7px">
            <div fxFlex="1 0 100px">
                <s4-launchbutton id="victDet" width="80%"  modal=true
                    [disabled]="gotovictimdetailsDisabled" [modalData]="gotovictimdetails"
                    (afterDialogClosed)="setDescription($event)" [onLaunchClick]="victimdetails">
                    {{translateService.translate('oivctmng.gotovictimdetails')}}</s4-launchbutton>
            </div>
        </div>
    </s4-panel>
    <s4-tabgroup>
        <s4-tab [label]="translateService.translate('oivctmng.linkedoffenders')">
            <s4-panel [cardType]="true" [readonly]="linkedoffReadOnly">
                <div fxLayout fxLayout.xs="column">
                    <div fxFlex="100%" fxFlex.xs="fixed" fxLayout="row">
                        <div fxFlex="1 0 700px">
                            <s4-grid #linkedOffGrid id="linkedOfftab" [rowData]="linkedOffData"
                                [columnDefs]="linkedOffColumnDef" (rowClicked)="onRowClickLinkedOff($event)"
                                [onInsert]="linkedOffGridInsert" [enableInsert]="linkedOffInsert" enableUpdate=true
                                [disabled]="linkedOffDataDisabled"
                                [selected]="linkedOffTableIndex" (onCommit)="saveLinkedOffData($event)"
                                [validateRow]="linkedOffVldtRowData">
                            </s4-grid>
                        </div>
                    </div>
                </div>
            </s4-panel>
        </s4-tab>
        <s4-tab [label]="translateService.translate('oivctmng.victimcontactlog')">
            <s4-panel [cardType]="true" [readonly]="victContReadOnly">
                <div fxLayout fxLayout.xs="column">
                    <div fxFlex="100%" fxFlex.xs="fixed" fxLayout="row">
                        <div fxFlex="1 0 700px">
                            <s4-grid #vctmContLogGrid id="victConttab" [rowData]="victContData"
                                [columnDefs]="victContColumnDef" (rowClicked)="onRowClickVictCont($event)"
                                [onInsert]="victContGridInsert" [enableInsert]="victContInsert" enableUpdate=true
                                 [disabled]="victContDataDisabled" [validateRow]="victimcontactlogValidateRow"
                                [selected]="victContTableIndex" (onCommit)="saveVictContLogData($event)">
                            </s4-grid>
                        </div>
                    </div>
                </div>
            </s4-panel>
        </s4-tab>
        <s4-tab [label]="translateService.translate('oivctmng.victimcontactpreferences')">
            <s4-panel [cardType]="true" [readonly]="victContPrefReadOnly">
                <div fxLayout fxLayout.xs="column">
                    <div fxFlex="100%" fxFlex.xs="fixed" fxLayout="row">
                        <div fxFlex="1 0 700px">
                            <s4-grid #vctmContPrefGrid id="victContPreftab" [rowData]="victContPrefData"
                                [columnDefs]="victContPrefColumnDef" (rowClicked)="onRowClickVictContPref($event)"
                                [onInsert]="onVictContPrefGridInsert" [enableInsert]="victContPrefInsert"
                                enableUpdate=true 
                                [disabled]="victContPrefDataDisabled" [selected]="victContPrefTableIndex"
                                (onCommit)="saveVictContPrefData($event)" [validateRow]="vctCntPrfVldRowData">
                            </s4-grid>
                        </div>
                    </div>
                </div>
            </s4-panel>
        </s4-tab>
    </s4-tabgroup>
</s4-pane>